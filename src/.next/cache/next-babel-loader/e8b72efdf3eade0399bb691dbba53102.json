{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from \"react-bootstrap/Container\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport fetch from \"isomorphic-fetch\";\nimport Router from \"next/router\";\nimport TextField from '@material-ui/core/TextField';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Modal from '@material-ui/core/Modal';\nimport Dialog from '@material-ui/core/Dialog';\nimport Divider from \"@material-ui/core/Divider\";\nimport $ from 'axios';\nimport TaskList from '../components/TaskList';\nimport AddItemModal from '../components/AddItemModal';\n\nclass Index extends React.Component {\n  static async getInitialProps({\n    req,\n    res\n  }) {\n    if (req.user) {\n      console.log('here343');\n      const username = req.user._json.name;\n      const baseURL = req ? `${req.protocol}://${req.get(\"Host\")}` : \"\";\n      const res = await fetch(`${baseURL}/user/tasklist/username/?username=${username}`, {\n        method: 'GET'\n      }); // console.log(await res.json(), '@@@@@@@@@@@@@@@2')\n\n      return {\n        tasklists: await res.json()\n      };\n    } else {\n      res.redirect('/login');\n    }\n  }\n\n  constructor(props) {\n    console.log(props, 'PROPSSSS');\n    super(props);\n    this.state = {\n      tasklists: this.props.tasklists,\n      listname: '',\n      tasks: [],\n      modalIsOpen: false,\n      deleteOpen: false\n    };\n    this.openModal = this.openModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n    this.openDeleteModal = this.openDeleteModal.bind(this);\n    this.closeDeleteModal = this.closeDeleteModal.bind(this);\n    this.addList = this.addList.bind(this);\n    this.deleteList = this.deleteList.bind(this);\n    this.changeList = this.changeList.bind(this);\n    this.addTask = this.addTask.bind(this);\n    this.getTask = this.getTask.bind(this);\n  }\n\n  openModal() {\n    console.log('openclicked');\n    this.setState({\n      modalIsOpen: true\n    });\n  }\n\n  closeModal() {\n    this.setState({\n      modalIsOpen: false\n    });\n  }\n\n  openDeleteModal() {\n    if (this.state.tasks.length > 0) {\n      this.setState({\n        deleteOpen: true\n      });\n    } else {\n      this.deleteList();\n    }\n  }\n\n  closeDeleteModal() {\n    this.setState({\n      deleteOpen: false\n    });\n  }\n\n  addList() {\n    console.log(this.props, {\n      user: this.props.user.displayName,\n      name: document.getElementById('newlistname').value\n    });\n    $.post('/user/tasklist/add', {\n      user: this.props.user.displayName,\n      name: document.getElementById('newlistname').value\n    }).then(() => {\n      fetch(`/user/tasklist/username/?username=${this.props.user.displayName}`, {\n        method: 'GET'\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        this.setState({\n          listname: document.getElementById('newlistname').value,\n          tasklists: data\n        });\n        document.getElementById('newlistname').value = '';\n      });\n    });\n  }\n\n  deleteList() {\n    const data = {\n      list: this.state.listname\n    };\n    $.post('/user/tasklist/delete', data).then(() => {\n      fetch(`/user/tasklist/username/?username=${this.props.user.displayName}`, {\n        method: 'GET'\n      }).then(res => {\n        return res.json();\n      }).then(data => {\n        this.setState({\n          listname: '',\n          tasklists: data,\n          tasks: []\n        });\n        this.closeDeleteModal();\n      });\n    });\n  }\n\n  changeList(event) {\n    $.get('/user/task', {\n      params: {\n        list: event.target.value\n      }\n    }).then(data => {\n      console.log(data, event.target.value, 'changelist res');\n      this.setState({\n        listname: event.target.value,\n        tasks: data.data\n      });\n      return;\n    }).then(data => {\n      console.log(this.state, 'changelist');\n    }).catch(err => {\n      throw err;\n    });\n  }\n\n  addTask() {\n    $.post('/user/task/add', {\n      user: this.props.user.displayName,\n      list: this.state.listname,\n      name: document.getElementById('newtaskname').value\n    }).then(() => {\n      this.getTask();\n      document.getElementById('newtaskname').value = '';\n    });\n  }\n\n  getTask() {\n    console.log(this.state.listname, 'LISTNAME IN GETTASK');\n    $.get('/user/task/get', {\n      params: {\n        list: this.state.listname\n      }\n    }).then(data => {\n      console.log(data, this.state, 'client data log');\n      this.setState({\n        tasks: data.data\n      });\n    }).catch(err => {\n      console.log(err, 'get task error');\n      throw err;\n    });\n  }\n\n  render() {\n    const styles = {\n      title: {\n        color: 'black'\n      },\n      toprow: {\n        width: '750px'\n      },\n      listTitle: {\n        textAlign: 'center'\n      },\n      root: {\n        width: '100%'\n      },\n      inputMenu: {\n        padding: '5px',\n        paddingLeft: '20px',\n        paddingRight: '20px',\n        paddingBottom: '20px',\n        marginRight: '50px',\n        textAlign: 'center',\n        border: '1px solid black',\n        borderRadius: '10px'\n      },\n      top: {\n        marginTop: '50px'\n      },\n      input: {\n        marginTop: '20px'\n      },\n      select: {\n        marginTop: '20px'\n      },\n      deleteModal: {\n        position: 'absolute',\n        width: 400,\n        border: '2px solid #000'\n      },\n      form: {\n        width: '100%'\n      }\n    };\n    return __jsx(Container, {\n      style: styles.title\n    }, __jsx(\"h2\", {\n      style: styles.title,\n      class: \"display-6 center-align\"\n    }, \"Forward Motion Project: Todo list\"), __jsx(Divider, null), __jsx(\"div\", {\n      class: \"row\",\n      style: styles.top\n    }, __jsx(\"div\", {\n      class: \"col-md-3\",\n      style: styles.inputMenu\n    }, __jsx(FormControl, {\n      style: styles.form,\n      variant: \"filled\"\n    }, __jsx(InputLabel, {\n      htmlFor: \"age-label-placeholder\"\n    }, \"Current Task List\"), __jsx(Select, {\n      id: \"filled-select\",\n      label: \"Select\",\n      style: styles.select,\n      class: \"toprow\",\n      onChange: this.changeList,\n      margin: \"normal\",\n      variant: \"filled\",\n      inputProps: {\n        name: 'Choose List',\n        id: 'age-native-simple'\n      }\n    }, __jsx(MenuItem, {\n      value: \"\"\n    }, __jsx(\"em\", null, \"None\")), this.state.tasklists.map(list => {\n      return __jsx(MenuItem, {\n        style: styles.menuItem,\n        value: list.name\n      }, \" \", list.name, \" \");\n    }))), __jsx(TextField, {\n      variant: \"filled\",\n      id: \"newlistname\",\n      style: styles.input\n    }), __jsx(Button, {\n      variant: \"primary\",\n      onClick: this.addList\n    }, \"Add New List\"), __jsx(TextField, {\n      variant: \"filled\",\n      id: \"newtaskname\",\n      style: styles.input\n    }), __jsx(Button, {\n      variant: \"primary\",\n      onClick: this.addTask\n    }, \"Add New Task\"), __jsx(Button, {\n      style: styles.input,\n      onClick: this.openDeleteModal\n    }, \" Delete List \"), __jsx(Container, null, __jsx(Dialog, {\n      \"aria-labelledby\": \"simple-modal-title\",\n      \"aria-describedby\": \"simple-modal-description\",\n      open: this.state.deleteOpen,\n      onRequestClose: this.closeDeleteModal\n    }, __jsx(\"div\", null, __jsx(\"h4\", {\n      id: \"simple-modal-title\"\n    }, \"There are still tasks in this list.\", __jsx(\"br\", null), \" Do you still want to delete?\"), __jsx(Button, {\n      onClick: this.deleteList\n    }, \"Yes\"), __jsx(Button, {\n      onClick: this.closeDeleteModal\n    }, \"No\"))))), __jsx(\"div\", {\n      id: \"list\",\n      class: \"col-md-8\"\n    }, __jsx(\"div\", {\n      class: \"row\"\n    }, __jsx(\"div\", null, __jsx(\"h3\", null, this.state.listname === '' ? 'Choose a tasklist' : 'Tasks in ' + this.state.listname))), __jsx(\"div\", {\n      class: \"row\"\n    }, __jsx(TaskList, {\n      itemlist: this.state.tasks,\n      fetch: this.getTask,\n      style: styles.root\n    })))));\n  }\n\n}\n\nexport default Index;","map":{"version":3,"sources":["C:\\Users\\dshye\\Documents\\code\\New folder\\todolist\\src\\pages\\index.js"],"names":["makeStyles","Container","Button","Grid","fetch","Router","TextField","Select","MenuItem","FormControl","InputLabel","Modal","Dialog","Divider","$","TaskList","AddItemModal","Index","React","Component","getInitialProps","req","res","user","console","log","username","_json","name","baseURL","protocol","get","method","tasklists","json","redirect","constructor","props","state","listname","tasks","modalIsOpen","deleteOpen","openModal","bind","closeModal","openDeleteModal","closeDeleteModal","addList","deleteList","changeList","addTask","getTask","setState","length","displayName","document","getElementById","value","post","then","data","list","event","params","target","catch","err","render","styles","title","color","toprow","width","listTitle","textAlign","root","inputMenu","padding","paddingLeft","paddingRight","paddingBottom","marginRight","border","borderRadius","top","marginTop","input","select","deleteModal","position","form","id","map","menuItem"],"mappings":"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","sourcesContent":["import { makeStyles } from '@material-ui/core/styles';\nimport Container from \"react-bootstrap/Container\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\"\nimport fetch from \"isomorphic-fetch\";\nimport Router from \"next/router\"\nimport TextField from '@material-ui/core/TextField'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Modal from '@material-ui/core/Modal'\nimport Dialog from '@material-ui/core/Dialog'\nimport Divider from \"@material-ui/core/Divider\"\nimport $ from 'axios';\n\nimport TaskList from '../components/TaskList'\nimport AddItemModal from '../components/AddItemModal'\n\nclass Index extends React.Component{\n\n  static async getInitialProps({req, res}){\n    if(req.user){\n      console.log('here343')\n      const username = req.user._json.name\n      const baseURL = req ? `${req.protocol}://${req.get(\"Host\")}` : \"\";\n      const res = await fetch(`${baseURL}/user/tasklist/username/?username=${username}`, {method:'GET'})\n      // console.log(await res.json(), '@@@@@@@@@@@@@@@2')\n      return {tasklists: await res.json()}\n    }else{\n      res.redirect('/login')\n    }\n\n  }\n\n  constructor(props){\n    console.log(props, 'PROPSSSS')\n    super(props)\n\n    this.state = {\n      tasklists: this.props.tasklists,\n      listname: '',\n      tasks: [],\n      modalIsOpen: false,\n      deleteOpen: false\n    }\n    this.openModal = this.openModal.bind(this)\n    this.closeModal = this.closeModal.bind(this)\n    this.openDeleteModal = this.openDeleteModal.bind(this)\n    this.closeDeleteModal = this.closeDeleteModal.bind(this)\n    this.addList = this.addList.bind(this)\n    this.deleteList = this.deleteList.bind(this)\n    this.changeList = this.changeList.bind(this)\n    this.addTask = this.addTask.bind(this)\n    this.getTask = this.getTask.bind(this)\n\n  }\n\n  openModal() {\n    console.log('openclicked')\n    this.setState({modalIsOpen: true});\n  }\n\n  closeModal() {\n    this.setState({modalIsOpen: false});\n  }\n\n  openDeleteModal() {\n    if(this.state.tasks.length > 0){\n      this.setState({deleteOpen: true})\n    }else{\n      this.deleteList()\n    }\n  }\n\n  closeDeleteModal() {\n    this.setState({deleteOpen: false})\n  }\n\n  addList(){\n    console.log(this.props,  {\n      user: this.props.user.displayName,\n      name: document.getElementById('newlistname').value\n    })\n    $.post('/user/tasklist/add', {\n      user: this.props.user.displayName,\n      name: document.getElementById('newlistname').value\n    })\n    .then(() => {\n      fetch(`/user/tasklist/username/?username=${this.props.user.displayName}`, {method:'GET'})\n        .then( (res) => {\n          return res.json()\n        })\n        .then( (data) => {\n\n          this.setState({\n            listname: document.getElementById('newlistname').value,\n            tasklists: data\n          })\n\n          document.getElementById('newlistname').value = ''\n        })\n\n    })\n\n  }\n\n  deleteList(){\n    const data = {\n      list: this.state.listname,\n    }\n    $.post('/user/tasklist/delete', data)\n      .then( () => {\n        fetch(`/user/tasklist/username/?username=${this.props.user.displayName}`, {method:'GET'})\n          .then( (res) => {\n            return res.json()\n          })\n          .then( (data) => {\n\n            this.setState({\n              listname: '',\n              tasklists: data,\n              tasks: []\n            })\n            this.closeDeleteModal()\n          })\n\n      })\n  }\n\n  changeList(event){\n\n    $.get('/user/task', {params: {list: event.target.value}})\n    .then( (data) => {\n      console.log(data, event.target.value, 'changelist res')\n      this.setState({\n        listname: event.target.value,\n        tasks: data.data\n      })\n      return\n    })\n    .then( (data) => {\n      console.log(this.state, 'changelist')\n    })\n    .catch( (err) => {\n      throw err\n    })\n  }\n\n  addTask(){\n\n    $.post('/user/task/add', {\n      user: this.props.user.displayName,\n      list: this.state.listname,\n      name: document.getElementById('newtaskname').value\n    })\n    .then( () => {\n      this.getTask()\n      document.getElementById('newtaskname').value = ''\n    })\n\n\n  }\n\n  getTask(){\n    console.log(this.state.listname, 'LISTNAME IN GETTASK')\n    $.get('/user/task/get', {params: {list: this.state.listname}})\n    .then( (data) => {\n      console.log(data, this.state, 'client data log')\n      this.setState({\n        tasks: data.data\n      })\n\n    })\n    .catch( (err) => {\n      console.log(err, 'get task error')\n      throw err\n    })\n  }\n\n  render(){\n\n    const styles = {\n      title: {\n        color: 'black'\n      },\n      toprow: {\n        width: '750px'\n      },\n      listTitle: {\n        textAlign: 'center'\n      },\n      root: {\n        width: '100%',\n      },\n      inputMenu: {\n        padding: '5px',\n        paddingLeft: '20px',\n        paddingRight: '20px',\n        paddingBottom: '20px',\n        marginRight: '50px',\n        textAlign: 'center',\n        border: '1px solid black',\n        borderRadius: '10px'\n      },\n      top:{\n        marginTop: '50px'\n      },\n      input:{\n        marginTop: '20px',\n\n      },\n      select: {\n        marginTop: '20px'\n      },\n      deleteModal: {\n\n        position: 'absolute',\n        width: 400,\n        border: '2px solid #000',\n      },\n      form:{\n        width: '100%'\n      }\n    }\n\n    return(\n      <Container style={styles.title}>\n        <h2 style={styles.title} class=\"display-6 center-align\">Forward Motion Project: Todo list</h2>\n        <Divider />\n          <div class=\"row\" style={styles.top}>\n            <div class=\"col-md-3\" style={styles.inputMenu}>\n              <FormControl style={styles.form} variant='filled'>\n                <InputLabel htmlFor=\"age-label-placeholder\">\n                Current Task List\n                </InputLabel>\n                <Select\n                  id=\"filled-select\"\n                  label=\"Select\"\n                  style={styles.select}\n                  class=\"toprow\"\n                  onChange={this.changeList}\n                  margin=\"normal\"\n                  variant=\"filled\"\n                  inputProps={{\n                    name: 'Choose List',\n                    id: 'age-native-simple',\n                  }}\n                >\n                <MenuItem value=\"\">\n                  <em>None</em>\n                </MenuItem>\n                  {(this.state.tasklists).map ( (list) => {\n                    return (  <MenuItem style={styles.menuItem} value={list.name}> {list.name} </MenuItem>)\n                  })}\n                </Select>\n              </FormControl>\n\n\n                <TextField variant=\"filled\" id='newlistname' style={styles.input}/>\n                <Button variant=\"primary\" onClick={this.addList}>Add New List</Button>\n\n\n                <TextField variant=\"filled\" id='newtaskname' style={styles.input}/>\n                <Button variant=\"primary\" onClick={this.addTask}>Add New Task</Button>\n\n                <Button style={styles.input} onClick={this.openDeleteModal}> Delete List </Button>\n                <Container>\n                <Dialog\n                  aria-labelledby=\"simple-modal-title\"\n                  aria-describedby=\"simple-modal-description\"\n                  open={this.state.deleteOpen}\n                  onRequestClose={this.closeDeleteModal}\n                >\n                  <div>\n                    <h4 id=\"simple-modal-title\">There are still tasks in this list.<br /> Do you still want to delete?</h4>\n                    <Button onClick={this.deleteList}>Yes</Button>\n                    <Button onClick={this.closeDeleteModal}>No</Button>\n\n                  </div>\n                </Dialog>\n                </Container>\n            </div>\n            <div id=\"list\" class=\"col-md-8\">\n              <div class=\"row\">\n                <div>\n                  <h3>{this.state.listname === '' ? 'Choose a tasklist' : 'Tasks in ' + this.state.listname}</h3>\n                </div>\n              </div>\n              <div class=\"row\">\n\n                <TaskList\n                  itemlist={this.state.tasks}\n                  fetch={this.getTask}\n                  style={styles.root}\n                />\n\n              </div>\n            </div>\n\n\n        </div>\n      </Container>\n    )\n  }\n}\n\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}