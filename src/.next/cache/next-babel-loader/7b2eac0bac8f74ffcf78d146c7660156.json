{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from \"react-bootstrap/Container\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport fetch from \"isomorphic-fetch\";\nimport Router from \"next/router\";\nimport TextField from '@material-ui/core/TextField';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Modal from '@material-ui/core/Modal';\nimport Dialog from '@material-ui/core/Dialog';\nimport Divider from \"@material-ui/core/Divider\";\nimport $ from 'axios';\nimport TaskList from '../components/TaskList';\nimport AddItemModal from '../components/AddItemModal';\n\nvar Index =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Index, _React$Component);\n\n  _createClass(Index, null, [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(_ref) {\n        var req, res, username, baseURL, _res;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                req = _ref.req, res = _ref.res;\n\n                if (!req.user) {\n                  _context.next = 14;\n                  break;\n                }\n\n                console.log('here343');\n                username = req.user._json.name;\n                baseURL = req ? \"\".concat(req.protocol, \"://\").concat(req.get(\"Host\")) : \"\";\n                _context.next = 7;\n                return fetch(\"\".concat(baseURL, \"/user/tasklist/username/?username=\").concat(username), {\n                  method: 'GET'\n                });\n\n              case 7:\n                _res = _context.sent;\n                _context.next = 10;\n                return _res.json();\n\n              case 10:\n                _context.t0 = _context.sent;\n                return _context.abrupt(\"return\", {\n                  tasklists: _context.t0\n                });\n\n              case 14:\n                res.redirect('/login');\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getInitialProps(_x) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  function Index(props) {\n    var _this;\n\n    _classCallCheck(this, Index);\n\n    console.log(props, 'PROPSSSS');\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Index).call(this, props));\n    _this.state = {\n      tasklists: _this.props.tasklists,\n      listname: '',\n      tasks: [],\n      modalIsOpen: false,\n      deleteOpen: false\n    };\n    _this.openModal = _this.openModal.bind(_assertThisInitialized(_this));\n    _this.closeModal = _this.closeModal.bind(_assertThisInitialized(_this));\n    _this.openDeleteModal = _this.openDeleteModal.bind(_assertThisInitialized(_this));\n    _this.closeDeleteModal = _this.closeDeleteModal.bind(_assertThisInitialized(_this));\n    _this.addList = _this.addList.bind(_assertThisInitialized(_this));\n    _this.deleteList = _this.deleteList.bind(_assertThisInitialized(_this));\n    _this.changeList = _this.changeList.bind(_assertThisInitialized(_this));\n    _this.addTask = _this.addTask.bind(_assertThisInitialized(_this));\n    _this.getTask = _this.getTask.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Index, [{\n    key: \"openModal\",\n    value: function openModal() {\n      console.log('openclicked');\n      this.setState({\n        modalIsOpen: true\n      });\n    }\n  }, {\n    key: \"closeModal\",\n    value: function closeModal() {\n      this.setState({\n        modalIsOpen: false\n      });\n    }\n  }, {\n    key: \"openDeleteModal\",\n    value: function openDeleteModal() {\n      if (this.state.tasks.length > 0) {\n        this.setState({\n          deleteOpen: true\n        });\n      } else {\n        this.deleteList();\n      }\n    }\n  }, {\n    key: \"closeDeleteModal\",\n    value: function closeDeleteModal() {\n      this.setState({\n        deleteOpen: false\n      });\n    }\n  }, {\n    key: \"addList\",\n    value: function addList() {\n      var _this2 = this;\n\n      console.log(this.props, {\n        user: this.props.user.displayName,\n        name: document.getElementById('newlistname').value\n      });\n      $.post('/user/tasklist/add', {\n        user: this.props.user.displayName,\n        name: document.getElementById('newlistname').value\n      }).then(function () {\n        fetch(\"/user/tasklist/username/?username=\".concat(_this2.props.user.displayName), {\n          method: 'GET'\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          _this2.setState({\n            listname: document.getElementById('newlistname').value,\n            tasklists: data\n          });\n\n          document.getElementById('newlistname').value = '';\n        });\n      });\n    }\n  }, {\n    key: \"deleteList\",\n    value: function deleteList() {\n      var _this3 = this;\n\n      var data = {\n        list: this.state.listname\n      };\n      $.post('/user/tasklist/delete', data).then(function () {\n        fetch(\"/user/tasklist/username/?username=\".concat(_this3.props.user.displayName), {\n          method: 'GET'\n        }).then(function (res) {\n          return res.json();\n        }).then(function (data) {\n          _this3.setState({\n            listname: '',\n            tasklists: data,\n            tasks: []\n          });\n\n          _this3.closeDeleteModal();\n        });\n      });\n    }\n  }, {\n    key: \"changeList\",\n    value: function changeList(event) {\n      var _this4 = this;\n\n      $.get('/user/task', {\n        params: {\n          list: event.target.value\n        }\n      }).then(function (data) {\n        console.log(data, event.target.value, 'changelist res');\n\n        _this4.setState({\n          listname: event.target.value,\n          tasks: data.data\n        });\n\n        return;\n      }).then(function (data) {\n        console.log(_this4.state, 'changelist');\n      })[\"catch\"](function (err) {\n        throw err;\n      });\n    }\n  }, {\n    key: \"addTask\",\n    value: function addTask() {\n      var _this5 = this;\n\n      $.post('/user/task/add', {\n        user: this.props.user.displayName,\n        list: this.state.listname,\n        name: document.getElementById('newtaskname').value\n      }).then(function () {\n        _this5.getTask();\n\n        document.getElementById('newtaskname').value = '';\n      });\n    }\n  }, {\n    key: \"getTask\",\n    value: function getTask() {\n      var _this6 = this;\n\n      console.log(this.state.listname, 'LISTNAME IN GETTASK');\n      $.get('/user/task/get', {\n        params: {\n          list: this.state.listname\n        }\n      }).then(function (data) {\n        console.log(data, _this6.state, 'client data log');\n\n        _this6.setState({\n          tasks: data.data\n        });\n      })[\"catch\"](function (err) {\n        console.log(err, 'get task error');\n        throw err;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var styles = {\n        title: {\n          color: 'black'\n        },\n        toprow: {\n          width: '750px'\n        },\n        listTitle: {\n          textAlign: 'center'\n        },\n        root: {\n          width: '100%'\n        },\n        inputMenu: {\n          padding: '5px',\n          paddingLeft: '20px',\n          paddingRight: '20px',\n          paddingBottom: '20px',\n          marginRight: '50px',\n          textAlign: 'center',\n          border: '1px solid black',\n          borderRadius: '10px'\n        },\n        top: {\n          marginTop: '50px'\n        },\n        input: {\n          marginTop: '20px'\n        },\n        select: {\n          marginTop: '20px'\n        },\n        deleteModal: {\n          position: 'absolute',\n          width: 400,\n          border: '2px solid #000'\n        },\n        form: {\n          width: '100%'\n        }\n      };\n      return __jsx(Container, {\n        style: styles.title\n      }, __jsx(\"h2\", {\n        style: styles.title,\n        \"class\": \"display-6 center-align\"\n      }, \"Forward Motion Project: Todo list\"), __jsx(Divider, null), __jsx(\"div\", {\n        \"class\": \"row\",\n        style: styles.top\n      }, __jsx(\"div\", {\n        \"class\": \"col-md-3\",\n        style: styles.inputMenu\n      }, __jsx(FormControl, {\n        style: styles.form,\n        variant: \"filled\"\n      }, __jsx(InputLabel, {\n        htmlFor: \"age-label-placeholder\"\n      }, \"Current Task List\"), __jsx(Select, {\n        id: \"filled-select\",\n        label: \"Select\",\n        style: styles.select,\n        \"class\": \"toprow\",\n        onChange: this.changeList,\n        margin: \"normal\",\n        variant: \"filled\",\n        inputProps: {\n          name: 'Choose List',\n          id: 'age-native-simple'\n        }\n      }, __jsx(MenuItem, {\n        value: \"\"\n      }, __jsx(\"em\", null, \"None\")), this.state.tasklists.map(function (list) {\n        return __jsx(MenuItem, {\n          style: styles.menuItem,\n          value: list.name\n        }, \" \", list.name, \" \");\n      }))), __jsx(TextField, {\n        variant: \"filled\",\n        id: \"newlistname\",\n        style: styles.input\n      }), __jsx(Button, {\n        variant: \"primary\",\n        onClick: this.addList\n      }, \"Add New List\"), __jsx(TextField, {\n        variant: \"filled\",\n        id: \"newtaskname\",\n        style: styles.input\n      }), __jsx(Button, {\n        variant: \"primary\",\n        onClick: this.addTask\n      }, \"Add New Task\"), __jsx(Button, {\n        style: styles.input,\n        onClick: this.openDeleteModal\n      }, \" Delete List \"), __jsx(Container, null, __jsx(Dialog, {\n        \"aria-labelledby\": \"simple-modal-title\",\n        \"aria-describedby\": \"simple-modal-description\",\n        open: this.state.deleteOpen,\n        onRequestClose: this.closeDeleteModal\n      }, __jsx(\"div\", null, __jsx(\"h4\", {\n        id: \"simple-modal-title\"\n      }, \"There are still tasks in this list.\", __jsx(\"br\", null), \" Do you still want to delete?\"), __jsx(Button, {\n        onClick: this.deleteList\n      }, \"Yes\"), __jsx(Button, {\n        onClick: this.closeDeleteModal\n      }, \"No\"))))), __jsx(\"div\", {\n        id: \"list\",\n        \"class\": \"col-md-8\"\n      }, __jsx(\"div\", {\n        \"class\": \"row\"\n      }, __jsx(\"div\", null, __jsx(\"h3\", null, this.state.listname === '' ? 'Choose a tasklist' : 'Tasks in ' + this.state.listname))), __jsx(\"div\", {\n        \"class\": \"row\"\n      }, __jsx(TaskList, {\n        itemlist: this.state.tasks,\n        fetch: this.getTask,\n        style: styles.root\n      })))));\n    }\n  }]);\n\n  return Index;\n}(React.Component);\n\nexport default Index;","map":{"version":3,"sources":["C:\\Users\\dshye\\Documents\\code\\New folder\\todolist\\src\\pages\\index.js"],"names":["makeStyles","Container","Button","Grid","fetch","Router","TextField","Select","MenuItem","FormControl","InputLabel","Modal","Dialog","Divider","$","TaskList","AddItemModal","Index","req","res","user","console","log","username","_json","name","baseURL","protocol","get","method","json","tasklists","redirect","props","state","listname","tasks","modalIsOpen","deleteOpen","openModal","bind","closeModal","openDeleteModal","closeDeleteModal","addList","deleteList","changeList","addTask","getTask","setState","length","displayName","document","getElementById","value","post","then","data","list","event","params","target","err","styles","title","color","toprow","width","listTitle","textAlign","root","inputMenu","padding","paddingLeft","paddingRight","paddingBottom","marginRight","border","borderRadius","top","marginTop","input","select","deleteModal","position","form","id","map","menuItem","React","Component"],"mappings":"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","sourcesContent":["import { makeStyles } from '@material-ui/core/styles';\nimport Container from \"react-bootstrap/Container\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\"\nimport fetch from \"isomorphic-fetch\";\nimport Router from \"next/router\"\nimport TextField from '@material-ui/core/TextField'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Modal from '@material-ui/core/Modal'\nimport Dialog from '@material-ui/core/Dialog'\nimport Divider from \"@material-ui/core/Divider\"\nimport $ from 'axios';\n\nimport TaskList from '../components/TaskList'\nimport AddItemModal from '../components/AddItemModal'\n\nclass Index extends React.Component{\n\n  static async getInitialProps({req, res}){\n    if(req.user){\n      console.log('here343')\n      const username = req.user._json.name\n      const baseURL = req ? `${req.protocol}://${req.get(\"Host\")}` : \"\";\n      const res = await fetch(`${baseURL}/user/tasklist/username/?username=${username}`, {method:'GET'})\n      // console.log(await res.json(), '@@@@@@@@@@@@@@@2')\n      return {tasklists: await res.json()}\n    }else{\n      res.redirect('/login')\n    }\n\n  }\n\n  constructor(props){\n    console.log(props, 'PROPSSSS')\n    super(props)\n\n    this.state = {\n      tasklists: this.props.tasklists,\n      listname: '',\n      tasks: [],\n      modalIsOpen: false,\n      deleteOpen: false\n    }\n    this.openModal = this.openModal.bind(this)\n    this.closeModal = this.closeModal.bind(this)\n    this.openDeleteModal = this.openDeleteModal.bind(this)\n    this.closeDeleteModal = this.closeDeleteModal.bind(this)\n    this.addList = this.addList.bind(this)\n    this.deleteList = this.deleteList.bind(this)\n    this.changeList = this.changeList.bind(this)\n    this.addTask = this.addTask.bind(this)\n    this.getTask = this.getTask.bind(this)\n\n  }\n\n  openModal() {\n    console.log('openclicked')\n    this.setState({modalIsOpen: true});\n  }\n\n  closeModal() {\n    this.setState({modalIsOpen: false});\n  }\n\n  openDeleteModal() {\n    if(this.state.tasks.length > 0){\n      this.setState({deleteOpen: true})\n    }else{\n      this.deleteList()\n    }\n  }\n\n  closeDeleteModal() {\n    this.setState({deleteOpen: false})\n  }\n\n  addList(){\n    console.log(this.props,  {\n      user: this.props.user.displayName,\n      name: document.getElementById('newlistname').value\n    })\n    $.post('/user/tasklist/add', {\n      user: this.props.user.displayName,\n      name: document.getElementById('newlistname').value\n    })\n    .then(() => {\n      fetch(`/user/tasklist/username/?username=${this.props.user.displayName}`, {method:'GET'})\n        .then( (res) => {\n          return res.json()\n        })\n        .then( (data) => {\n\n          this.setState({\n            listname: document.getElementById('newlistname').value,\n            tasklists: data\n          })\n\n          document.getElementById('newlistname').value = ''\n        })\n\n    })\n\n  }\n\n  deleteList(){\n    const data = {\n      list: this.state.listname,\n    }\n    $.post('/user/tasklist/delete', data)\n      .then( () => {\n        fetch(`/user/tasklist/username/?username=${this.props.user.displayName}`, {method:'GET'})\n          .then( (res) => {\n            return res.json()\n          })\n          .then( (data) => {\n\n            this.setState({\n              listname: '',\n              tasklists: data,\n              tasks: []\n            })\n            this.closeDeleteModal()\n          })\n\n      })\n  }\n\n  changeList(event){\n\n    $.get('/user/task', {params: {list: event.target.value}})\n    .then( (data) => {\n      console.log(data, event.target.value, 'changelist res')\n      this.setState({\n        listname: event.target.value,\n        tasks: data.data\n      })\n      return\n    })\n    .then( (data) => {\n      console.log(this.state, 'changelist')\n    })\n    .catch( (err) => {\n      throw err\n    })\n  }\n\n  addTask(){\n\n    $.post('/user/task/add', {\n      user: this.props.user.displayName,\n      list: this.state.listname,\n      name: document.getElementById('newtaskname').value\n    })\n    .then( () => {\n      this.getTask()\n      document.getElementById('newtaskname').value = ''\n    })\n\n\n  }\n\n  getTask(){\n    console.log(this.state.listname, 'LISTNAME IN GETTASK')\n    $.get('/user/task/get', {params: {list: this.state.listname}})\n    .then( (data) => {\n      console.log(data, this.state, 'client data log')\n      this.setState({\n        tasks: data.data\n      })\n\n    })\n    .catch( (err) => {\n      console.log(err, 'get task error')\n      throw err\n    })\n  }\n\n  render(){\n\n    const styles = {\n      title: {\n        color: 'black'\n      },\n      toprow: {\n        width: '750px'\n      },\n      listTitle: {\n        textAlign: 'center'\n      },\n      root: {\n        width: '100%',\n      },\n      inputMenu: {\n        padding: '5px',\n        paddingLeft: '20px',\n        paddingRight: '20px',\n        paddingBottom: '20px',\n        marginRight: '50px',\n        textAlign: 'center',\n        border: '1px solid black',\n        borderRadius: '10px'\n      },\n      top:{\n        marginTop: '50px'\n      },\n      input:{\n        marginTop: '20px',\n\n      },\n      select: {\n        marginTop: '20px'\n      },\n      deleteModal: {\n\n        position: 'absolute',\n        width: 400,\n        border: '2px solid #000',\n      },\n      form:{\n        width: '100%'\n      }\n    }\n\n    return(\n      <Container style={styles.title}>\n        <h2 style={styles.title} class=\"display-6 center-align\">Forward Motion Project: Todo list</h2>\n        <Divider />\n          <div class=\"row\" style={styles.top}>\n            <div class=\"col-md-3\" style={styles.inputMenu}>\n              <FormControl style={styles.form} variant='filled'>\n                <InputLabel htmlFor=\"age-label-placeholder\">\n                Current Task List\n                </InputLabel>\n                <Select\n                  id=\"filled-select\"\n                  label=\"Select\"\n                  style={styles.select}\n                  class=\"toprow\"\n                  onChange={this.changeList}\n                  margin=\"normal\"\n                  variant=\"filled\"\n                  inputProps={{\n                    name: 'Choose List',\n                    id: 'age-native-simple',\n                  }}\n                >\n                <MenuItem value=\"\">\n                  <em>None</em>\n                </MenuItem>\n                  {(this.state.tasklists).map ( (list) => {\n                    return (  <MenuItem style={styles.menuItem} value={list.name}> {list.name} </MenuItem>)\n                  })}\n                </Select>\n              </FormControl>\n\n\n                <TextField variant=\"filled\" id='newlistname' style={styles.input}/>\n                <Button variant=\"primary\" onClick={this.addList}>Add New List</Button>\n\n\n                <TextField variant=\"filled\" id='newtaskname' style={styles.input}/>\n                <Button variant=\"primary\" onClick={this.addTask}>Add New Task</Button>\n\n                <Button style={styles.input} onClick={this.openDeleteModal}> Delete List </Button>\n                <Container>\n                <Dialog\n                  aria-labelledby=\"simple-modal-title\"\n                  aria-describedby=\"simple-modal-description\"\n                  open={this.state.deleteOpen}\n                  onRequestClose={this.closeDeleteModal}\n                >\n                  <div>\n                    <h4 id=\"simple-modal-title\">There are still tasks in this list.<br /> Do you still want to delete?</h4>\n                    <Button onClick={this.deleteList}>Yes</Button>\n                    <Button onClick={this.closeDeleteModal}>No</Button>\n\n                  </div>\n                </Dialog>\n                </Container>\n            </div>\n            <div id=\"list\" class=\"col-md-8\">\n              <div class=\"row\">\n                <div>\n                  <h3>{this.state.listname === '' ? 'Choose a tasklist' : 'Tasks in ' + this.state.listname}</h3>\n                </div>\n              </div>\n              <div class=\"row\">\n\n                <TaskList\n                  itemlist={this.state.tasks}\n                  fetch={this.getTask}\n                  style={styles.root}\n                />\n\n              </div>\n            </div>\n\n\n        </div>\n      </Container>\n    )\n  }\n}\n\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}